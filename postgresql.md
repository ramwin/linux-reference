### 基础
[安装](https://www.digitalocean.com/community/tutorials/how-to-install-and-use-postgresql-on-ubuntu-16-04)  

### [Tutorial](https://www.postgresql.org/docs/current/tutorial.html)
1. [Getting Started](https://www.postgresql.org/docs/current/tutorial-start.html)
```shell
sudo apt install postgresql postgresql-contrib
sudo -i -u postgres
psql
sudo -u postgres psql
createuser --interactive
createdb [<databasename>] default name is the username
dropdb <databasename>
psql <databasename>
```

2. The SQL Language
    1. Introduction
    ```
    cd ..../src/tutorial
    make
    cd ..../toturial
    psql -s mydb
    mydb=> \i basics.sql
    ```
    3. [创建表](https://www.postgresql.org/docs/current/tutorial-table.html)
    ```
    CREATE TABLE weather (
        city    varchar(80),
        temp_lo int,
        temp_hi int,
        prcp    real,
        date    date
    )
    ```
3. Advanced Features
    2. Views
    ```
    CREATE VIEW myview AS SELECT city, temp_lo, temp_hi, location FROM weather, cities WHERE city = name;
    SELECT * FROM myview;
    ```

### The SQL Language
#### 数据定义 Data 
* 约束
    * check约束
    ```
    create table weather ( temp_lo int CHECK (temp_lo > 0) );
    ```

#### [5.7 Privileges 权限](https://www.postgresql.org/docs/current/ddl-priv.html)
* 更改表的权限
```sql
ALTER TABLE <table_name> OWNER TO <role_name>;  // 变更表，数据库的owner
GRANT SELECT ON <table_name> TO <role_name>;  // 允许某个用户查询某个表
REVOKE ALL ON role2_s_table FROM wangx;  // 不允许wangx操作role2_s_table
REVOKE DELETE ON <table_name> TO <role_name>;  // 删除用户的DELETE权限
```
* 查看表的权限
r是select权限
a是insert权限
w是update权限
d是delete权限
```
\dp role2_s_table;
wangx=# \dp role2_s_table;
                                   存取权限 架构模式 |     名称      |  类型  |         存取权限          | 列特权 | 策略
----------+---------------+--------+---------------------------+--------+------
 public   | role2_s_table | 数据表 | postgres=arwdDxt/postgres+|        |
          |               |        | noper=r/postgres          |        |
```

#### 数据类型
1. Numeric Types
    1. Integer Types

### Sever Administration 服务器管理

#### Database Roles

```sql
CREATE ROLE <name>;
DROP ROLE <name>;
SELECT rolname FROM pg_roles;
```

### [PostgreSQL Administration](https://www.postgresqltutorial.com/postgresql-administration/)
* [展示所有table](https://www.postgresqltutorial.com/postgresql-show-tables/)  `\dt`
* 展示所有数据库 `\l`

#### 权限
* 允许用户创建表
```sql
ALTER USER <username> CREATEDB
```

### Reference
#### [Create Table 创建表](https://www.postgresql.org/docs/current/sql-createtable.html)
* 添加自增主键
```sql
create table students (
    id integer primary key generated by default as identity,
    name char(3)
);
insert into students values (default, '1');  # 1
insert into students values (2, '1');
insert into students values (default, '1');  # 报错, 因为2存在了
```
